<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">

        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="App.css">
        <link rel="stylesheet" href="index.css">
        <!-- <script src="http://d3js.org/d3.v3.min.js"></script> -->
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://rawgit.com/jasondavies/d3-cloud/master/build/d3.layout.cloud.js"></script>
        <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?2.5.0"></script> 
        <title>Elo Rating System</title>
    </head>

<body>
  </div>
    <h2>Explore tinder!</h2>
    <button onClick="SwipesLeft()">left arrow - no</button>
    <img src='../src/img/facebook-avatar.jpg' /> 
    <p>Person: </p>
    <p id="tinder-img-label">0</p>
    <button onClick="SwipesRight()">right arrow - yes</button>
    <p>my current score:</p>
    <p id="my-current-score"></p>
    <p>other current score:</p>
    <p id="other-current-score"></p>
    
    <!-- <div id="tinder"></div> -->

    <svg id="chart" height="100" width="200">
        <!-- <path stroke-width="2"> -->
      </svg>
  </div>

  <script>
      var margin = {top: 30, right: 20, bottom: 30, left: 50},
        width = 600 - margin.left - margin.right,
        height = 270 - margin.top - margin.bottom;

    const data = [
        { x: 0, y: 30 },
        { x: 50, y: 20 },
        { x: 100, y: 40 },
        { x: 150, y: 80 },
        { x: 20, y: 90 },
        { x: 50, y: 80 },
        { x: 200, y: 95 }
      ]

      // console.log(data)

      // const path = "M" + data.map((d)=> {
      //   return d.x + ',' + (100 - d.y);
      // }).join('L');
      // const line = `<path stroke-width="2" d="${ path }"/>`;
      // document.querySelector('#chart').innerHTML = line;

    // Set the ranges
    var x = d3.scale.linear().range([0, width]);
    var y = d3.scale.linear().range([height, 0]);
    x.domain([0, d3.max(data, function(d) { return d.x; })]);
    y.domain([0, d3.max(data, function(d) { return d.y; })]);

    // Define the axes
    var xAxis = d3.svg.axis().scale(x)
        .orient("bottom").ticks(5);
    
    var yAxis = d3.svg.axis().scale(y)
        .orient("left").ticks(5);

    // Define the line
    var valueline = d3.svg.line()
      .x(function(d) { return x(d.x); })
      .y(function(d) { return y(d.y); });

    // Define the div for the tooltip
    var div = d3.select("#chart").append("div")	
        .attr("class", "tooltip")				
        .style("opacity", 0);

            // Adds the svg canvas
    var svg = d3.select("#chart")
        .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
        .append("g")
            .attr("transform", 
                  "translate(" + margin.left + "," + margin.top + ")");

        svg.append("path")
            .attr("class", "line")
            .attr("d", valueline(data));

        // Add the scatterplot
        svg.selectAll("dot")	
            .data(data)			
        .enter().append("circle")								
            .attr("r", 5)		
            .attr("cx", function(d) { return x(d.x); })		 
            .attr("cy", function(d) { return y(d.y); })		
            .on("mouseover", function(d) {		
                div.transition()		
                    .duration(200)		
                    .style("opacity", .9);		
                	
                })					
            .on("mouseout", function(d) {		
                div.transition()		
                    .duration(500)		
                    .style("opacity", 0);	
            });

        // Add the X Axis
        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);
    
        // Add the Y Axis
        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis);

      // const line = d3.svg.line()
      //   .x((data)=> data.x)
      //   .y((data)=> 100 - data.y)
      //   .interpolate("linear")

      // d3.select('#chart')
      //   .append("path")
      //   .attr('stroke-width', 2)
      //   .attr('d', line(data))

    var imgIndex = 0;
    var imgLabel = document.getElementById("tinder-img-label");
    var historyOther = {};
    var historyMine = {};
  // console.log(typeof(personArray))
    document.getElementById("other-current-score").innerHTML = data[imgIndex];
    
    function SwipesLeft() {
      if(imgIndex == 0){
        imgIndex = Object.size(data);
      } else {
        imgIndex--;
      }
      imgLabel.innerHTML = imgIndex;
    //   historyOther.push(personArray[imgIndex]);
    //   historyMine.push(calculated);
    }

    function SwipesRight() {
      if(imgIndex == Object.size(data)){
        imgIndex = 0;
      } else {
        imgIndex++;
      }
      imgLabel.innerHTML = imgIndex;
      // historyOther.push(personArray[imgIndex]);
      // historyMine.push(calculated);

    }

    Object.size = function(obj) {
      var size = 0, key;
      for (key in obj) {
          if (obj.hasOwnProperty(key)) size++;
      }
      return size;
    };

  </script>
</body>