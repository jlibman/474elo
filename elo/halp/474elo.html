<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">

        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

        <link rel="stylesheet" href="App.css">
        <link rel="stylesheet" href="index.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <title>Elo Rating System</title>
    </head>

<body>
        <div class = "center"><h1> The Elo Rating System Explained</h1>
        <h6> By: Jessica Libman, Joycie Yu, and Zhanna Voloshina</h4></div>
<div class = "row">
     <div class = "left">
            <br/>
            <br/>
            <br/>
         <h2>Background</h2>
        <p> The algorithm was originally created by Arpad Elo as a way to accurately evaluate the skills of chess players. 
            Essentially, the algorithm allows you to rank players based on their performance in "matches" against opponents, applicable
            to many different contexts.
            This rating system is now used beyond just chess tournaments.
                It is used in professional sports tournaments, League of Legends, and Tinder. It's likely you have encountered it's use
                without even knowing it! However, each organization has a slightly different implementation of it, but the core idea 
                behind it remains the same.
        </p>
        <br/>
        <br/>
        <br/>
    </div>

    <div class = "right">
        <br/>
        <br/>
        <br/>
        <img src="http://www.chessmaniac.com/wp-content/uploads/2012/12/elo.jpg" alt="" width="197" height="256">
    
    </div>

    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="https://rawgit.com/jasondavies/d3-cloud/master/build/d3.layout.cloud.js"></script>
      <div class = "left">
            <h2> How it Works</h2>
            <p> 
                A user's score is determined from the ratings of their opponents, and their results based on wins and losses.
                The equation on the right demonstrates the <b>expected score</b> of both Player A and Player B if they were to
                compete against each other. 
                
                Additionally, Elo includes a mechanism to adjust scores when the results are not as expected.
           </p>
        </div>
    <div class = "right">
        <br/>
        <br/>
        <img class="aligncenter" src="https://wikimedia.org/api/rest_v1/media/math/render/svg/51346e1c65f857c0025647173ae48ddac904adcb" alt="Elo rating, elo rating algorithm, elo rating for chess, facebook algorithm, facemash algorithm, Elo rating system" width="201" height="48">
        <br/>
        <img class="aligncenter" src="https://wikimedia.org/api/rest_v1/media/math/render/svg/4b340e7d15e61ee7d90f428dcf7f4b3c049d89ff" alt="Elo rating, elo rating algorithm, elo rating for chess, facebook algorithm, facemash algorithm, Elo rating system" width="201" height="48">   
        <br/>
    </div>

    <div class = "left">
            <br/>
            <br/>
            <br/>
            <h2> Elo in Context </h2>
            <p> Tinder uses the Elo Rating System to customize their application to each of their users. 
            Each user is initially shown other users at around the same rating because
            they believe that each of these other users are good potentially match due to comparable scores. Tinder's matching algorithm is 
            much more complex than just Elo, and includes more factors, but is a good way to understand the basis of the Elo Rating System.
           </p>
        </div>
</div>
<br/>
<br/>
<br/>
<br/>

<div class = "center">
    <h1> Explore Your Rating! </h1>
    <div>
    <label>
            My current Elo Rating:             
                    <input name="elo1" value="2000" size="8"/>
    </label>
  </div>
  <div>
    <label>
      Other user's rating:
      <input type="text" ng-model="opponentRating" oninput="calculateNewRating()">
    </label>
  </div>
  <div>
    Result:
    <div>
      <label>
        <input type="radio" value="1" ng-model="gameResult" oninput="calculateNewRating()">
        Other User Swiped Right
      </label>
    </div>
    <div>
      <label>
        <input type="radio" value="0" ng-model="gameResult" oninput="calculateNewRating()">
        Other User Swiped Left
      </label>
    </div>
    <button onClick="CalculateRatingChange()" >Submit</button>

    <script>
        // document.getElementById("myInput").onInput = function() {myFunction()};

        function myFunction() {
            document.getElementById("demo").innerHTML = "Your new rating is 1192 and rating delta is -8 ";
        }
    </script>

<script>
function CalculateRatingChange() {
    var Elo1 = document.rating.elo1.value * 1;
    var Elo2 = document.rating.elo2.value * 1;
    var K = document.rating.K.value * 1;
    var EloDifference = Elo2 - Elo1;
    var percentage = 1 / ( 1 + Math.pow( 10, EloDifference / 400 ) );
    var win = Math.round( K * ( 1 - percentage ) );
    var draw = Math.round( K * ( .5 - percentage ) );
    if (win > 0 ) win = "+" + win;
    if (draw > 0 ) draw = "+" + draw;
    document.ratingchange.win.value = win;
    document.ratingchange.draw.value = draw;
    document.ratingchange.loss.value = Math.round( K * ( 0 - percentage ) );
    document.ratingchange.percent.value =  Math.round( percentage * 100 ) + "%";
}

</SCRIPT>
<h2 align="center">Elo Rating Change Calculator</h2>

This section will calculate the change in a player's Elo rating after playing a 

single game against another player. The value K is the maximum change in rating.

<br/><br/>



 <form action="" name="rating" id="rating">

<table width="540" style="padding: 2px; border: 1px solid #888899; background-color:#EEEEEE; ">

  <tr>

    <td>

    My current Elo Rating: 

        <input name="elo1" value="2000" size="8"/>

        </td>

    <td>

		K : <input name="K" value="32" size="4"/>

</td>

</tr><tr>

<td>

 Other user's Elo Rating  : 

 <input name="elo2" value="2000" size="8"/></td>

<td><input type="button" value="Calculate Change" onClick="CalculateRatingChange()" class="button"/></td>

</tr></table>

</form>



<br />

<form name="ratingchange" id="ratingchange" action="" >

<table width="540" style="border: 1px solid #888899; background-color:#EEEEEE"><tr><td>

<table width="100%" style="margin: 4px 4px 4px 4px;"><tr>

<td width="33%">Win</td>

<td width="33%">Draw</td>

<td width="33%">Loss</td>

</tr>

<tr><td>

<input name="win" value="0" size="8" style="border: 0px; font-weight:bold; background-color:#EEEEEE" />

</td><td>

<input name="draw" value="0" size="8" style="border: 0px; font-weight:bold; background-color:#EEEEEE" />

</td><td>

<input name="loss" value="0" size="8" style="border: 0px; font-weight:bold; background-color:#EEEEEE" />

</td></tr></table>

<br/>

Expected Percentage : <input name="percent" value="0" size="8" style="border: 0px; font-weight:bold; background-color:#EEEEEE" />

</td>

</tr></table>

</form>



</td></tr></table>

</div>

    <p id="demo"></p>

<div id="line"></div>â€‹
 <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?2.5.0"></script> 
<script type="text/javascript">
  var w = 700;
  var h = 300;

  var svg = d3.select("#line")
    .append("svg")
    .attr("width", w)
    .attr("height", h)
    .attr("id", "visualization")
    .attr("xmlns", "http://www.w3.org/2000/svg");

  var data = d3.range(11).map(function(){return Math.random()*10})
  var x = d3.scale.linear().domain([0, 10]).range([0, 700]);
  var y = d3.scale.linear().domain([0, 10]).range([10, 290]);
  var line = d3.svg.line()
    .interpolate("cardinal")
    .x(function(d,i) {return x(i);})
    .y(function(d) {return y(d);})

  var path = svg.append("path")
    .attr("d", line(data))
    .attr("stroke", "steelblue")
    .attr("stroke-width", "2")
    .attr("fill", "none");

  var totalLength = path.node().getTotalLength();

  path
    .attr("stroke-dasharray", totalLength + " " + totalLength)
    .attr("stroke-dashoffset", totalLength)
    .transition()
      .duration(2000)
      .ease("linear")
      .attr("stroke-dashoffset", 0);

  svg.on("click", function(){
    path      
      .transition()
      .duration(2000)
      .ease("linear")
      .attr("stroke-dashoffset", totalLength);
  })

</script> 

 </div>
  <h2>Explore tinder!</h2>
  <p>Swipe left to simulate someone else swiping "NO" on your profile. Swipe right to simulate someone else swiping "YES" on your </p>
  <!-- <a href="#" class="arrow left " onClick="SwipesLeft()"></a> -->
  <button class="arrow left" onClick="SwipesLeft()">
      <i class="material-icons">keyboard_arrow_left</i>
  </button>
  <img src='../src/img/facebook-avatar.jpg' /> 
  <p>Person: </p>
  <p id="tinder-img-label">0</p>
  <!-- <a href="#" class="arrow right" onClick="SwipesRight()"></a> -->

<button class="arrow right" onClick="SwipesRight()">
  <i class="material-icons">keyboard_arrow_right</i>
  </button>
  <p>my current score:</p>
  <p id="my-current-score"></p>
  <p>other current score:</p>
  <p id="other-current-score"></p>
  
  <div id="tinder"></div>
</div> 

 <script>
  
  const historyArray = [
    { x: 80, y: 30 }
  ]
  const otherPeople = [
        { x: 0, y: 30 },
        { x: 50, y: 20 },
        { x: 100, y: 40 },
        { x: 150, y: 80 },
        { x: 20, y: 90 },
        { x: 50, y: 80 },
        { x: 200, y: 95 }
      ]

  var imgIndex = 0;
  var imgLabel = document.getElementById("tinder-img-label");
  var myCurr = 100;
  var left = true;
  // var historyOther = [];
  // var historyMine = [];
  // console.log(historyArray[1].x)

  document.getElementById("my-current-score").innerHTML = myCurr;
  document.getElementById("other-current-score").innerHTML = otherPeople[imgIndex].y;
  
  function SwipesLeft() {
    left = true;
    if(imgIndex == 0){
      imgIndex = Object.size(otherPeople);
    } else {
      imgIndex--;
    }
    imgLabel.innerHTML = imgIndex;
    // historyOther.push(historyArray[imgIndex]);
    // historyMine.push(calculated);
    //  imgLabel.innerHTML = imgIndex;
    // document.getElementById("my-current-score").innerHTML = myCurr;
    // document.getElementById("other-current-score").innerHTML = otherPeople[imgIndex].y;
    calculateChange();
  }

  function SwipesRight() {
    left = false;
    if(imgIndex == Object.size(otherPeople)){
      imgIndex = 0;
    } else {
      imgIndex++;
    }
    imgLabel.innerHTML = imgIndex;
    // historyOther.push(historyArray[imgIndex]);
    // historyMine.push(calculated);
    // imgIndex = Object.size(historyArray);
    // document.getElementById("my-current-score").innerHTML = myCurr;
    // document.getElementById("other-current-score").innerHTML = otherPeople[imgIndex].y;
    calculateChange();
  }

  function calculateChange() {
    console.log(imgIndex)
    if(left) {
      myCurr =  myCurr - otherPeople[imgIndex].y * 0.05 ;
    } else {
      myCurr =  myCurr + otherPeople[imgIndex].y * 0.05 ;
    }

    document.getElementById("my-current-score").innerHTML = myCurr;
    document.getElementById("other-current-score").innerHTML = otherPeople[imgIndex].y;
  }

  Object.size = function(obj) {
    var size = 0, key;
    for (key in obj) {
        if (obj.hasOwnProperty(key)) size++;
    }
    return size;
};

</script>


    
    </script>
</body>
</html>